---
layout: post
title: OSI与TCP/IP协议簇
date: 2020-08-18
categories:
- network
---
**分层思想**

> * 为什么要分层?
>   * 完成一项工作需要的协议太多
> * 什么是分层?
>   * 将复杂的流程分解成几个功能相对单一的子过程
>     * 流程更清晰, 复杂问题简单化
>     * 更容易发现问题, 并有针对性的解决

**OSI七层模型**

> * 同层使用相同协议
> * 目的: 全世界标准统一
> * 哪七层?
>   * 应用
>   * 表示
>   * 会话
>   * 传输
>   * 网络
>   * 数据链路
>   * 物理
> * 该模型其实**并没有被广泛使用**
> * 数据单元: 
>   * 物理层: 比特
>   * 数据链路层: 帧
>   * 网络层: 数据包
>   * 传输层: 数据段
>   * 应用层: 原始数据

**TCP/IP五层协议簇(最常用)**

> * 用较少的**表示层**和**会话层**与**应用层**合并, 统称**应用层**
> * 哪五层?
>   * 应用
>   * 传输
>   * 网络
>   * 数据链路
>   * 物理
> * **`IP协议 --> 网络层`**
> * **`TCP协议 --> 传输层`**
> * **TCP/IP协议簇: 先有协议, 后有模型**
> * **OSI模型: 先有模型, 再有协议**
> * OSI模型和TCP/IP协议簇属于**同一时期诞生**, OSI出现稍早一些

**TCP/IP四层模型**

> * 把**物理层**和**数据链路层**统一为**网络接口层**
> * 哪四层?
>   * 应用
>   * 传输
>   * 网络
>   * 网路接口
> * 比较鸡肋, 没什么人这么用

**数据的封装与解封装**

> * 封装过程由上至下
>
> **`应用层:`** "Hello!" 
>
> **`传输层:`**  `TCP/UDP头`"Hello!" (封装)    # `TCP/UDP头`包含`源端口号` `目标端口号`  进程到进程
>
> **`网络层:`**  `IP包头` `TCP/UDP头`"Hello!"   #  `IP包头`包含`源IP ` `目标IP`   点到点
>
> ----
>
> 数据到达**网卡**
>
> ----
>
> **`数据链路层:`**   `MAC子层` `IP包头`  `TCP/UDP头` "Hello!" `FCS`
>
> #`MAC子层`包含 `源MAC地址` `目标MAC地址`
>
> #**交换机**工作在数据链路层, 只认MAC地址不认IP地址
>
> ----
>
> 到达**网线口**
>
> ----
>
> **`物理层:`**  数字信号
>
> * 解封装逆行向上

**PDU协议数据单元** 

> * 来自上层的信息和当前层的实体附加的信息
> * `应用层:  ` 原始信息
> * `传输层: ` 段 == TCP/IP头 + 原始信息
> * `网络层: ` 报文/包  == IP包头 + TCP/IP头 + 原始信息
> * `数据链路层:`  帧(Frame) == MAC子层(帧头) + IP包头 + TCP/IP头 + 原始信息 + FCS(帧尾)
> * `物理层: ` 比特(电脉冲1/0) == 数字信号(比特流)     8bit = 1Byte
>   * 100Mb/s  -- 运营商说的100兆网速   --  实际网速 100/8  不到10MB/s的速度
>   * 100MB/s  --  真正的每秒100兆    

**五层工作设备**

> * 5层-应用层:  PC  防火墙
> * 4层-传输层:  防火墙
> * 3层-网络层:  路由器
> * 2层-数据链路层:  交换机  网卡
> * 1层-物理层:  网线

**五层协议**

> * 应用层: `HTTP HTTPS SSH Telnet FTP DHCP DNS SMTP POP3 RDP SMB ...`
> * 传输层: `TCP UDP`
> * 网络层: `IP ICMP ARP...` 
> * 数据链路层: `MAC子层`
> * 物理层: `比特流`

