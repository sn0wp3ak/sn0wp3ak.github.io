---
layout: post
title: Shell运算符
date: 2020-11-25
categories:
- shell
---

运算符分类:
1. 算数运算符
2. 关系运算符
3. 布尔运算符
4. 字符串运算符
5. 文件测试运算符

原生bash并不支持简单数学运算, 但是可以通过其他命令来实现, 如: awk和expr<br>

expr是一个表达式计算工具, 使用它可以完成表达式的求值<br>

注意: expr计算表达式的两端是`反引号`而非单引号<br>

```shell
val=`expr 1 + 2`
echo "1 + 2 = $val"
```
```
1 + 2 = 3
```

注意:
1. 表达式和运算符之间必须要有空格
2. 完整的表达式要被反引号包含

### 算数运算符
假设变量a为10, 变量b为20<br>

运算符|说明|用例
:-|:-|:-
+|加法|\`expr $a + $b\` 结果: 30
-|减法|\`expr $a - $b\` 结果: -10
*|乘法|\`expr $a \* $b\` 结果: 200
/|除法|\`expr $b / $a\` 结果: 2
%|取模|\`expr $b % $a\` 结果: 0
=|赋值|c = $a 把变量a的值赋值给变量c
==|相等|[$a == $b] 返回false
!=|不相等|[$a != $b] 返回true

* 条件表达式(相等/不相等)要放在方括号中, 且运算符号和表达式也必须用空格分隔
* 乘法是特殊的, `*`前面必须加`\`进行转义

### 关系运算符
关系运算符只支持数字, 而不支持字符串, 除非是一个纯数字型的字符串<br>
也就是说比较文本字符串的大小需要其他运算符<br>

假设变量a为10, 变量b为20<br>

运算符|说明|用例
:-|:-|:-
-eq|是否相等|[$a -eq $b] 返回false
-ne|是否不等|[$a -ne $b] 返回true
-gt|左边是否大于右边|[$a -gt $b] 返回false
-lt|左边是否小于右边|[$a -lt $b] 返回true
-ge|左边是否大于等于右边|[$a -ge $b] 返回false
-le|左边是否小于等于右边|[$a -le $b] 返回true

### 布尔运算符
假设变量a为10, 变量b为20<br>

运算符|说明|用例
:-|:-|:-
!|非|[! false] 返回true
-o|或, 1真则真|[$a -lt 20 -o $b -gt 100] 返回true
-a|与, 1假则假|[$a -lt 20 -a $b -gt 100] 返回false

### 逻辑运算符
假设变量a为10, 变量b为20<br>

运算符|说明|用例
&&|逻辑AND|[[$a -lt 100 && $b -gt 100]] 返回false
\|\||逻辑OR|[[$a -lt 100 \|\| $b -gt 100]] 返回true

### 字符串运算符
假设变量a为"abc", 变量b为"efg"<br>

运算符|说明|用例
:-|:-|:-
=|字符串是否相等|[$a = $b] 返回false
!=|字符串是否不等|[$a != $b] 返回true
-z|字符串长度是否为0|[-z $a] 返回false
-n|字符串长度是否不为0|[-n "$a"] 返回true
$|字符串是否不为空|[$a] 返回true

### 文件测试运算符
用于检测类Unix文件的各种属性<br>

操作符|说明|用例
:-|:-|:-
-b file|是否是块设备文件|[-b $file]
-c file|是否是字符设备文件|[-c $file]
-d file|是否是目录文件|[-d $file]
-f file|是否是普通文件|[-f $file]
-g file|文件是否设置了SGID|[-g $file]
-k file|文件是否设置了SBIT|[-k $file]
-p file|是否是有名管道|[-p $file]
-u file|文件是否设置了SUID|[-u $file]
-r file|文件是否可读|[-r $file]
-w file|文件是否可写|[-w $file]
-x file|文件是否可执行|[-x $file]
-s file|文件是否是空文件|[-s $file]
-e file|文件是否存在|[-e $file]
-S file|是否是socket|[-S $file]
-L file|是否是链接文件|[-L $file]


