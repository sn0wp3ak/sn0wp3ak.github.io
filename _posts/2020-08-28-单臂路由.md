---
title: 单臂路由
date: 2020-08-28
categories:
- Network
---
1.VLAN控制广播域

2.不同的VLAN之间无法通信

3.规划一个VLAN==一个网段

例如:

VLAN10 -- IT部 -- 10.1.1.0/24

VLAN20 -- 财务部 -- 20.1.1.0/24

4.不同VLAN之间通信是靠路由来实现的

* 如果希望 10.1.1.1 和 20.1.1.1 能通信怎么做?

  需要网关(路由器), 且能绑定多个IP(10.1.1.254/20.1.1.254)

```
int f0/0.1  # .1 子接口
encapsulation dot1q 10
ip add 10.1.1.254 255.255.255.0
no shutdown
exit

int f0/0.2  # .2 子接口
encapsulation dot1q 20
ip add 20.1.1.254 255.255.255.0
no shutdown
exit

int f0/0  # 启用父端口
no shut
```

* 此时父端口充当通道,  由子端口分别

* 交换机连接路由器的那个端口必须配成Trunk端口

* 但是路由器根交换机连接的那个父端口是一个三层端口, 不能配置成Trunk

  此时识别trunk标签的任务就会交给2个儿子端口来做

**单臂路由原理**

> * 单臂路由干了什么事?
>   * 替换了trunk标签, 使得数据包能够抵达另一VLAN
> * 单臂路由的目的是什么?
>   * 使不同VLAN的PC能够单播通信
>   * VLAN+Trunk+单臂路由:  既减低了广播量, 又不妨碍PC之间的其他通信
> * 为什么用单臂?
>   * 一个端口当两个用, 降低成本(不用买额外模块), 减少端口消耗, 方便管理, 一根线搞定
>   * VLAN远大于路由器的接口数, 两个VLAN尚可不用单臂, 但是10个呢?

**单臂路由目前已经被淘汰了**

**单臂路由缺点：**

> 1. 网络瓶颈 ---- 那条单臂压力越来越大
> 2. 容易发生单点物理故障
>    （所有的子接口依赖于总物理接口）
> 3. VLAN间通信的每一个帧都进行单独路由, 步骤复杂, 耗时长, 效率下降
