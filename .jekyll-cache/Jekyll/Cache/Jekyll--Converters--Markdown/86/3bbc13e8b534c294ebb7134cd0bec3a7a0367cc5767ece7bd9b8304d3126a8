I"ª<p>SMB</p>
<ul>
  <li>Server Messages Block</li>
  <li>æœåŠ¡å™¨æ¶ˆæ¯å—</li>
</ul>

<p>åŸºäºSMBåè®®å¼€å‘äº†SMBServeråæ›´åä¸ºSamba<br /></p>
<blockquote>
  <p>yum install samba<br /></p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">SambaæœåŠ¡çš„ç›®çš„ä¸»è¦æ˜¯è§£å†³Linuxå’ŒWindowsä¹‹é—´çš„æ–‡ä»¶å…±äº«é—®é¢˜</code>, å½“ç„¶åœ¨Linuxå’ŒLinuxä¹‹é—´ä¹Ÿå¯ä»¥ä½¿ç”¨<br /></p>

<p>SambaæœåŠ¡çš„ä¸»é…ç½®æ–‡ä»¶: <code class="language-plaintext highlighter-rouge">/etc/samba/smb.conf</code><br />
åŒæ ·çš„å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¯”è¾ƒæ¸…çˆ½çš„é…ç½®æ–‡ä»¶, å¯ä»¥å¤‡ä»½ä»¥åé‡å†™åŸæ¥çš„é…ç½®æ–‡ä»¶<br />
åé€‰è¿‡æ»¤æ‰ä»¥â€#â€å’Œâ€;â€å¼€å¤´çš„æ³¨é‡Šè¡Œå†…å®¹, ä»¥åŠç”¨â€^$â€åé€‰è¿‡æ»¤æ‰ç©ºç™½è¡Œ<br /></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv /etc/samba/smb.conf /etc/samba/smb.conf.bak
cat /etc/samba/smb.conf.bak | grep -v "#" | grep -v ";" | grep 
-v "^$" &gt; /etc/samba/smb.conf
</code></pre></div></div>
<h3 id="é…ç½®å…±äº«">é…ç½®å…±äº«</h3>
<p>SambaæœåŠ¡ä¹Ÿæœ‰å…¨å±€é…ç½®å’Œå±€éƒ¨é…ç½®<br />
åˆ›å»ºå…±äº«èµ„æºçš„æ–¹æ³•: ä¿®æ”¹é…ç½®æ–‡ä»¶å‚æ•°+é‡å¯æœåŠ¡<br /></p>

<p>è®¾ç½®SambaæœåŠ¡çš„å¸¸ç”¨å‚æ•°:<br /></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">å‚æ•°</th>
      <th style="text-align: left">ä½œç”¨</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">[data_dir]</td>
      <td style="text-align: left">å…±äº«åç§°</td>
    </tr>
    <tr>
      <td style="text-align: left">comment = Do not arbitrarily modify the database file</td>
      <td style="text-align: left">æ³¨é‡Šè­¦å‘Š</td>
    </tr>
    <tr>
      <td style="text-align: left">path = /home/data_dir</td>
      <td style="text-align: left">å…±äº«ç›®å½•çš„è·¯å¾„</td>
    </tr>
    <tr>
      <td style="text-align: left">public = no</td>
      <td style="text-align: left">å…³é—­â€æ‰€æœ‰äººå¯è§â€</td>
    </tr>
    <tr>
      <td style="text-align: left">writable = yes</td>
      <td style="text-align: left">å…è®¸å†™å…¥</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>åˆ›å»ºç”¨äºè®¿é—®å…±äº«èµ„æºçš„è´¦æˆ·ä¿¡æ¯
    <ul>
      <li>RHEL 7 ä¸­Sambaé»˜è®¤é‡‡ç”¨ç”¨æˆ·å£ä»¤è®¤è¯è¿™ç§è®¤è¯æ¨¡å¼</li>
      <li>åªæœ‰å»ºç«‹ç”¨æˆ·ä¿¡æ¯æ•°æ®åº“ä»¥åæ‰èƒ½ä½¿ç”¨è¿™ç§è®¤è¯æ¨¡å¼</li>
      <li>SambaæœåŠ¡çš„æ•°æ®åº“è¦æ±‚<code class="language-plaintext highlighter-rouge">ç”¨æˆ·å¿…é¡»æ˜¯åœ¨ç³»ç»Ÿä¸­å®é™…å­˜åœ¨çš„</code></li>
      <li>pdbeditç”¨äºç®¡ç†Sambaè´¦æˆ·ä¿¡æ¯æ•°æ®åº“, æ ¼å¼: <code class="language-plaintext highlighter-rouge">pdbedit [å‚æ•°] è´¦æˆ·</code><br />
        <ul>
          <li>ç¬¬ä¸€æ¬¡æŠŠè´¦æˆ·ä¿¡æ¯å†™å…¥Sambaæ•°æ®åº“æ—¶, éœ€è¦ä½¿ç”¨<code class="language-plaintext highlighter-rouge">-a</code>å‚æ•°</li>
          <li>pdbeditå‘½ä»¤å¸¸ç”¨å‚æ•°åˆ—è¡¨:
            <ul>
              <li>
                <table>
                  <thead>
                    <tr>
                      <th style="text-align: left">å‚æ•°</th>
                      <th style="text-align: left">ä½œç”¨</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="text-align: left">-a ç”¨æˆ·å</td>
                      <td style="text-align: left">åˆ›å»ºSambaè´¦æˆ·</td>
                    </tr>
                    <tr>
                      <td style="text-align: left">-x ç”¨æˆ·å</td>
                      <td style="text-align: left">åˆ é™¤Sambaè´¦æˆ·</td>
                    </tr>
                    <tr>
                      <td style="text-align: left">-L</td>
                      <td style="text-align: left">åˆ—å‡ºè´¦æˆ·åˆ—è¡¨</td>
                    </tr>
                    <tr>
                      <td style="text-align: left">-Lv</td>
                      <td style="text-align: left">åˆ—å‡ºè´¦æˆ·ä¿¡æ¯çš„è¯¦ç»†åˆ—è¡¨</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pdbedit -a -u sn0wp3ak
</code></pre></div>    </div>
  </li>
  <li>åˆ›å»ºç”¨äºèµ„æºå…±äº«çš„æ–‡ä»¶ç›®å½•
    <ul>
      <li>å…±äº«ç›®å½•çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„å˜æ›´</li>
      <li>ä¿®æ”¹SELinuxç›¸å…³é™åˆ¶
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /home/data_dir
chown -Rf sn0wp3ak:sn0wp3ak /home/data_dir
semanage fcontext -a -t samba_share_t /home/data_dir
restorecon -Rv /home/data_dir
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>è®¾ç½®SELinuxæœåŠ¡ä¸ç­–ç•¥
    <ul>
      <li>å…è®¸é€šè¿‡SambaæœåŠ¡è®¿é—®æ™®é€šç”¨æˆ·å®¶ç›®å½•
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>getsebool -a | grep samba
samba_enable_home_dirs --&gt; off
</code></pre></div>        </div>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setsebool -P samba_enable_home_dirs --&gt; on
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>åœ¨SambaæœåŠ¡ä¸»é…ç½®æ–‡ä»¶ä¸­å†™å…¥å…±äº«ä¿¡æ¯
    <ul>
      <li><code class="language-plaintext highlighter-rouge">vim /etc/samba/smb.conf</code><br />
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[data_dir]
comment = Do not arbitrarily modify the database file
path = /home/data_dir
public = no
writable = yes
</code></pre></div>        </div>
      </li>
      <li>[homes]å’Œ[prints]å‚æ•°å—çš„å†…å®¹, å¦‚æœä¸éœ€è¦å¯ä»¥æ‰‹åŠ¨åˆ é™¤</li>
    </ul>
  </li>
  <li>é‡å¯SambaæœåŠ¡, æ¸…ç©ºiptablesé˜²ç«å¢™ç­–ç•¥
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl restart samba
systemctl enable samba
iptables -F
service iptables save
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="ä»windowsä¸»æœºè®¿é—®linuxæœåŠ¡å™¨éƒ¨ç½²çš„sambaæœåŠ¡">ä»Windowsä¸»æœºè®¿é—®LinuxæœåŠ¡å™¨éƒ¨ç½²çš„SambaæœåŠ¡</h3>
<p>è¿è¡Œ --&gt; <code class="language-plaintext highlighter-rouge">\\æœåŠ¡å™¨IPåœ°å€</code></p>

<hr />

<h3 id="linuxä¸linuxä¹‹é—´é€šè¿‡sambaæœåŠ¡å®ç°æ–‡ä»¶å…±äº«">Linuxä¸Linuxä¹‹é—´é€šè¿‡SambaæœåŠ¡å®ç°æ–‡ä»¶å…±äº«</h3>
<p>éœ€è¦åœ¨å®¢æˆ·ç«¯å®‰è£…æ”¯æŒå…±äº«æœåŠ¡çš„è½¯ä»¶åŒ…<br /></p>
<blockquote>
  <p>yum install cifs-utils</p>
</blockquote>

<ol>
  <li>åœ¨å®¢æˆ·ç«¯è¿™è¾¹æŒ‰ç…§SambaæœåŠ¡çš„ç”¨æˆ·å, å¯†ç , å…±äº«åŸŸçš„é¡ºåºå°†ç›¸å…³ä¿¡æ¯å†™å…¥åˆ°ä¸€ä¸ªè®¤è¯æ–‡ä»¶ä¸­<br />
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim auth.smb
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>username=sn0wp3ak
password=samba
domain=MYGROUP
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ä»…rootç”¨æˆ·èƒ½å¤Ÿè¯»å†™
chmod 600 auth.smb
</code></pre></div>    </div>
  </li>
  <li>åœ¨å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªç”¨äºæŒ‚è½½SambaæœåŠ¡å…±äº«èµ„æºçš„ç›®å½•, å¹¶å†™å…¥/etc/fstab
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /data_dir
vim /etc/fstab
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//æœåŠ¡å™¨IPåœ°å€/data_dir /data_dir cifs credentials=/root/auth.smb 0 0
</code></pre></div>    </div>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount -a
</code></pre></div>    </div>
  </li>
</ol>

<hr />

<h3 id="ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ">ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ</h3>
<p>NFS</p>
<ul>
  <li>Network File System
    <blockquote>
      <p>yum install nfs-utils</p>
    </blockquote>
  </li>
</ul>

<p>NFSä»…ç”¨äºLinuxå’ŒLinuxä¹‹é—´çš„æ–‡ä»¶å…±äº«<br /></p>

:ET